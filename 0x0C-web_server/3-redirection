#!/usr/bin/env bash
# This script installs Nginx, configures a URL redirection & restarts Nginx

# Install Nginx if not already installed
if ! command -v nginx &> /dev/null
then
    apt-get update
    apt-get -y install nginx
fi

# Define the redirection configuration
redirection_config="\
server {
    listen 80;
    listen [::]:80;

    server_name _;

    location /redirect_me {
        return 301 https://www.example.com/redirected_page;
    }

    # Additional server configuration can be added here
}
"

# Apply the redirection configuration using sed
echo "$redirection_config" | sudo tee /etc/nginx/sites-available/redirect > /dev/null
sudo ln -s /etc/nginx/sites-available/redirect /etc/nginx/sites-enabled/
sudo service nginx restart
